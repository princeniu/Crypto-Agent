# AI加密货币多智能体专家系统 PRD

## 1. 产品概述

本项目旨在开发一个基于Python的多智能体加密货币交易专家系统，参考成熟股票市场多智能体架构。系统通过不同角色的AI智能体协作完成多维度、多周期市场分析，并辅助用户进行交易决策。

- **输入**：用户指定的加密货币（如 `BTC/USDT`）  
- **输出**：  
  1. 多维度分析报告（技术面、基本面、新闻、社交情绪）  
  2. 看涨/看跌研究员的结构化辩论结果  
  3. 最终交易决策（方向、入场点、止盈止损点）

- **目标**：  
  - 自动化完成加密市场的全方位分析  
  - 输出结构化的交易建议和关键点位  
  - 使用免费或开源API获取市场数据与情绪信息  

---

## 2. 系统架构概述

整体采用**多智能体协作架构**，智能体之间通过统一状态（`AgentState`）和消息机制交互。参考文档的架构保持五大类智能体：

1. **分析师团队（Analysts）**
2. **研究员团队（Researchers）**
3. **交易执行（Trader）**
4. **风险管理团队（Risk Management）**
5. **管理层（Managers）**

**核心流程**分为三个阶段：

1. **并行分析阶段**  
   分析师团队从不同维度生成独立分析报告（技术面、基本面、新闻、社交情绪）。

2. **研究辩论阶段**  
   研究经理组织看涨/看跌研究员基于分析报告进行结构化辩论，生成研究共识。

3. **交易决策阶段**  
   交易员结合共识与风险团队评估输出最终的交易建议和点位。

---

## 3. 智能体分类与职责

### 3.1 分析师团队 (Analysts)

| 智能体 | 职责 | 输入数据 | 输出数据 |
|--------|------|---------|---------|
| **基本面分析师 (Fundamentals Analyst)** | 分析链上数据、项目基本面 | CoinGecko / DefiLlama 免费API | 项目评分、代币经济模型健康度 |
| **技术分析师 (Market Analyst)** | 分析K线与技术指标（RSI/MACD/布林带等） | CCXT历史数据 | 趋势方向、关键支撑阻力位 |
| **新闻分析师 (News Analyst)** | 分析新闻事件与宏观因素 | CryptoPanic免费API | 事件影响评分、宏观趋势判断 |
| **社交媒体分析师 (Social Media Analyst)** | 分析推特、Reddit情绪与热度 | Twitter API v2 / Reddit爬虫 | 社交情绪评分、热点话题 |

---

### 3.2 研究员团队 (Researchers)

| 智能体 | 职责 |
|--------|------|
| **看涨研究员 (Bull Researcher)** | 提出乐观投资理由，识别积极催化剂 |
| **看跌研究员 (Bear Researcher)** | 提出悲观投资理由，识别潜在风险 |

**输出**：结构化辩论结果（看涨/看跌逻辑、风险提示、共识结论）

---

### 3.3 交易执行 (Trader)

| 智能体 | 职责 |
|--------|------|
| **交易员 (Trader)** | 综合分析与研究共识，生成交易方向、入场点、止盈止损点 |

---

### 3.4 风险管理团队 (Risk Management)

| 智能体 | 职责 |
|--------|------|
| **激进风险评估员** | 支持高风险高收益策略 |
| **中性风险评估员** | 平衡风险与收益 |
| **保守风险评估员** | 强调风险控制和资本保护 |

输出风险评分和仓位建议，由风险经理最终审核。

---

### 3.5 管理层 (Managers)

| 智能体 | 职责 |
|--------|------|
| **研究经理 (Research Manager)** | 组织研究员辩论并形成研究共识 |
| **风险经理 (Risk Manager)** | 汇总风险结果，调整仓位建议并确认最终执行决策 |

---

## 4. 核心功能与交互流程


### 阶段1：并行分析阶段

1. 用户输入目标币种后，系统开始第一阶段分析。  
2. 市场数据会同时传递给四位分析师：  
   - 基本面分析师  
   - 技术分析师  
   - 新闻分析师  
   - 社交媒体分析师  
3. 四位分析师独立处理数据并输出各自的分析报告，形成综合分析结果集合。

---

### 阶段2：研究辩论阶段

1. 所有分析报告被提交给研究经理。  
2. 研究经理组织看涨研究员与看跌研究员进行结构化辩论，流程为：  
   - 研究经理向两位研究员分发分析报告  
   - 看涨研究员提出积极投资逻辑与潜在上涨机会  
   - 看跌研究员提出潜在风险与下行可能性  
   - 双方进行多轮交替辩论（默认3轮）  
3. 研究经理收集辩论结果并形成**研究共识**。

---

### 阶段3：交易决策阶段

1. 研究共识传递给交易员，由交易员整合分析师报告与研究共识生成初步交易决策，包括：  
   - 入场方向（多头/空头/观望）  
   - 入场点位  
   - 止盈止损点位  
2. 初步交易决策提交给风险管理团队进行评估，流程为：  
   - 风险评估员根据不同策略风格（激进、中性、保守）输出风险评分与建议  
   - 风险经理根据整体风险状况做出最终批准或调整  
3. 系统生成**最终决策输出**，以结构化JSON形式提供给用户。

---

## 5. 数据与API方案（免费优先）

- **行情数据**：CCXT（支持Binance/OKX/Gate）  
- **链上数据**：DefiLlama / CoinGecko API  
- **新闻数据**：CryptoPanic免费API  
- **社交数据**：  
  - Twitter API v2（免费版速率有限）  
  - Reddit爬虫或Pushshift免费API  

---

## 6. 系统配置与开发建议

- **语言与框架**：Python 3.11+  
- **多智能体调度**：  
  - 基于异步队列或协程调度  
  - 智能体继承 `BaseAgent` 并实现 `process()` 方法  
- **消息与状态管理**：  
  - `AgentState` 存储当前币种分析数据  
  - `AgentMessage` 统一智能体通信  
- **LLM配置**：  
  - 默认使用 `gpt-4o-mini` 或 `gpt-4o`（低温度0.1）  
  - 每轮输出结构化JSON，便于解析  

---

## 7. 最终输出示例（JSON）

```json
{
  "symbol": "BTC/USDT",
  "trend": "bullish",
  "entry_price": 61850,
  "stop_loss": 60900,
  "take_profit": 63500,
  "confidence_score": 0.78,
  "risk_level": "medium",
  "analysis_summary": {
    "fundamental": "BTC活跃地址增长，长期利好",
    "technical": "多周期趋势上行，关键支撑61800",
    "news": "美联储加息暂停，市场情绪回暖",
    "social": "Twitter热度上升，Reddit多头情绪强烈"
  }
}
```

---

## 8. 开发优先级

1. 构建基础智能体框架（BaseAgent/AgentState/AgentMessage）  
2. 接入免费行情API并完成技术分析师模块  
3. 完成其他分析师数据采集和报告生成  
4. 实现研究员辩论与交易员决策逻辑  
5. 集成风险管理与最终决策输出  
6. 提供CLI或Web简易接口供用户输入币种获取决策  

---
